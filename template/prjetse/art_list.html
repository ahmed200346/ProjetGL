{% load static %}
<!DOCTYPE html>
<html lang="en">
 
<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Home Page</title>
  <meta name="description" content="">
  <meta name="keywords" content="">
  <!-- Favicons -->
  <link href="{% static 'assets/img/favicon.png' %}" rel="icon" type="image/png">
  <link href="{% static 'assets/img/apple-touch-icon.png' %}" rel="apple-touch-icon" sizes="180x180">


  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Cardo:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="{% static 'assets/vendor/bootstrap/css/bootstrap.min.css'%}" rel="stylesheet">
  <link href="{% static 'assets/vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/glightbox/css/glightbox.min.css' %}" rel="stylesheet">
  <link href="{% static 'assets/vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'assets/css/main.css'%}" rel="stylesheet">

  <!-- =======================================================

  * Template Name: PhotoFolio
  * Template URL: https://bootstrapmade.com/photofolio-bootstrap-photography-website-template/
  * Updated: Aug 07 2024 with Bootstrap v5.3.3
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>


<body class="index-page">

  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid position-relative d-flex align-items-center justify-content-between">

        <a href="#" class="logo d-flex align-items-center me-auto me-xl-0">
            <i class="bi bi-camera"></i>
              <h1 class="sitename">PhotoFolio</h1>  
          </a>      
      <nav id="navmenu" class="navmenu">
        <ul>
            <li><a href="#" onclick="stayOnHome()">Home<br></a></li>
          <li><a href="about.html">About</a></li>
          <li class="dropdown"><a href="gallery.html" class="active"><span>Gallery</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
            <ul>
              <li><a href="gallery.html">Nature</a></li>
              <li><a href="gallery.html">People</a></li>
              <li><a href="gallery.html">Architecture</a></li>
              <li><a href="gallery.html">Animals</a></li>
              <li><a href="gallery.html">Sports</a></li>
              <li><a href="gallery.html">Travel</a></li>
              <li class="dropdown"><a href="#"><span>Deep Dropdown</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
                <ul>
                  <li><a href="#">Deep Dropdown 1</a></li>
                  <li><a href="#">Deep Dropdown 2</a></li>
                  <li><a href="#">Deep Dropdown 3</a></li>
                  <li><a href="#">Deep Dropdown 4</a></li>
                  <li><a href="#">Deep Dropdown 5</a></li>
                </ul>
              </li>
            </ul>
          </li>
          <li><a href="services.html">Services</a></li>
          <li><a href="contact.html">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
<style>
  .btn-logout {
  font-size: 18px;
  color: #fff; /* Couleur du texte */
  background-color: #333; /* Couleur de fond */
  padding: 10px 20px;
  border-radius: 5px;
  text-decoration: none;
  display: inline-block;
  margin-left: 20px; /* Espacement à gauche du bouton */
  transition: background-color 0.3s;
}

.btn-logout:hover {
  background-color: #ff4d4d; /* Changer la couleur au survol */
}
</style>
      <div class="header-social-links">
        <a href="#" class="twitter"><i class="bi bi-twitter-x"></i></a>
        <a href="#" class="facebook"><i class="bi bi-facebook"></i></a>
        <a href="#" class="instagram"><i class="bi bi-instagram"></i></a>
        <a href="#" class="linkedin"><i class="bi bi-linkedin"></i></a>
      </div>

    </div>
  </header>
<h1>Liste des Arts</h1>
  <table>
   
    {% load filters %}

    <tbody>
      <tr>
        <td colspan="3">
          <div class="gallery-container">
            <div class="gallery">
              {% for art in arts %}
                <div class="gallery-item text-center position-relative">
                  
                  <!-- Vérification du type de fichier pour l'affichage de l'image ou vidéo -->
                  {% if art.fichier.url|is_image %}
                    <!-- Image cliquable qui ouvre la modale au simple clic -->
                    <img src="{{ art.fichier.url }}" alt="Image of {{ art.owner_name }}" class="gallery-image mx-auto d-block" data-bs-toggle="modal" data-bs-target="#zoomModal{{ art.ID_art }}" ondblclick="toggleLike(this)">
                  {% elif art.fichier.url|is_video %}
                    <!-- Vidéo cliquable qui ouvre la modale au simple clic -->
                    <video class="gallery-image mx-auto d-block" data-bs-toggle="modal" data-bs-target="#zoomModal{{ art.ID_art }}">
                      <source src="{{ art.fichier.url }}" type="video/mp4">
                      Your browser does not support the video tag.
                    </video>
                  {% endif %}
                  
                  <!-- Bouton cœur superposé sur l'image ou vidéo -->
                  <button class="heart-button" onclick="toggleLike(this)">
                    ❤️
                  </button>
    
                  <!-- Compteur de likes sous l'image ou vidéo -->
                  <p class="like-count">Likes: <span class="count">0</span></p>
        
                  <p>{{ art.title }}</p>
                  <p>{{ art.price }} $</p>
                </div>
    
                <!-- Modale pour afficher l'image ou vidéo zoomée -->
                <div class="modal fade" id="zoomModal{{ art.ID_art }}" tabindex="-1" aria-labelledby="zoomModalLabel{{ art.ID_art }}" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="zoomModalLabel{{ art.ID_art }}">Zoom sur l'image/vidéo</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        {% if art.fichier.url|is_video %}
                          <!-- Vidéo zoomée -->
                          <video controls class="img-fluid no-white-bg">
                            <source src="{{ art.fichier.url }}" type="video/mp4">
                            Your browser does not support the video tag.
                          </video>
                        {% elif art.fichier.url|is_image %}
                          <!-- Image zoomée -->
                          <img src="{{ art.fichier.url }}" alt="Zoomed Image" class="img-fluid no-white-bg">
                        {% endif %}
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                      </div>
                    </div>
                  </div>
                </div>
              {% endfor %}
            </div>
          </div>
        </td>
      </tr>
      <script>
        // Sélectionner tous les éléments vidéo
        const videos = document.querySelectorAll('.gallery-video');
    
        // Ajouter un écouteur d'événement à chaque vidéo
        videos.forEach(video => {
          video.addEventListener('play', function() {
            // Mettre en pause toutes les autres vidéos quand une vidéo est lue
            videos.forEach(v => {
              if (v !== video) {
                v.pause();
              }
            });
          });
        });
      </script>
    
    </tbody>
    

<!-- Style CSS -->
<style>
  .gallery-container {
    display: flex;
    justify-content: center;
    padding: 20px;
  }

  .gallery {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 images par ligne */
    gap: 20px;
    max-width: 1200px;
  }

  .gallery-item {
    text-align: center;
    padding: 10px;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    background-color: transparent;
    position: relative;
  }

  .gallery-image {
    width: 100%;
    height: auto;
    max-height: 220px;
    object-fit: cover;
    border-radius: 8px;
    cursor: pointer; /* Clic sur l'image */
  }

  /* Style du bouton cœur */
  .heart-button {
    position: absolute;
    top: 10px;
    right: 10px;
    background: transparent;
    border: none;
    font-size: 30px;
    color: white;
    cursor: pointer;
    opacity: 0; /* Invisible par défaut */
    transition: opacity 0.3s ease, transform 0.3s ease;
  }

  /* Le bouton cœur devient visible au survol de l'image */
  .gallery-item:hover .heart-button {
    opacity: 1; /* Affiche le bouton cœur au survol */
    transform: scale(1.2); /* Agrandit légèrement le cœur */
  }

  /* L'icône cœur vide (par défaut) */
  .heart-button {
    color: white; /* Cœur vide en blanc */
  }

  /* Cœur rempli lorsque l'image est likée */
  .liked .heart-button {
    color: red; /* Cœur rouge pour le "like" */
  }

  /* Compteur de likes */
  .like-count {
    margin-top: 10px;
    font-size: 14px;
    color: #333;
  }

  .like-count .count {
    font-weight: bold;
    color: red;
  }

  /* Pour la modale d'image zoomée */
  .modal-body {
    background-color: transparent; /* Supprime le fond blanc autour de l'image */
    padding: 0;
    border: none;
  }

  .no-white-bg {
    width: 100%;
    height: auto;
    object-fit: contain;
    background-color: transparent !important;
    border: none !important;
    box-shadow: none !important;
  }

  .modal-content {
    background-color: transparent !important;
    box-shadow: none !important;
  }

  @media (max-width: 768px) {
    .gallery {
      grid-template-columns: repeat(2, 1fr);
    }
  }
</style>

<!-- Script pour activer l'action du cœur au double-clic -->
<script src="https://kit.fontawesome.com/a076d05399.js"></script> <!-- Font Awesome pour l'icône du cœur -->
<script>
  function toggleLike(element) {
    // Sélectionner l'élément qui contient le bouton cœur
    const galleryItem = element.closest('.gallery-item');
    const heartButton = galleryItem.querySelector('.heart-button');
    const likeCountSpan = galleryItem.querySelector('.count');
    
    // Si l'élément n'a pas la classe 'liked', on la rajoute et on augmente le compteur
    if (!galleryItem.classList.contains('liked')) {
      galleryItem.classList.add('liked');
      heartButton.style.color = 'red'; // Change la couleur du cœur en rouge
      let currentCount = parseInt(likeCountSpan.textContent); // Récupère le nombre actuel de likes
      likeCountSpan.textContent = currentCount + 1; // Incrémente le compteur
    } else {
      galleryItem.classList.remove('liked');
      heartButton.style.color = 'white'; // Remet le cœur en blanc
      let currentCount = parseInt(likeCountSpan.textContent); // Récupère le nombre actuel de likes
      likeCountSpan.textContent = currentCount - 1; // Décrémente le compteur
    }
  }
</script>

<!-- Bootstrap JS pour la modale -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    
    
        
  </table>
  <footer id="footer" class="footer">

    <div class="container">
      <div class="copyright text-center ">
        <p>© <span>Copyright</span> <strong class="px-1 sitename">PhotoFolio</strong> <span>All Rights Reserved</span></p>
      </div>
      <div class="social-links d-flex justify-content-center">
        <a href=""><i class="bi bi-twitter-x"></i></a>
        <a href=""><i class="bi bi-facebook"></i></a>
        <a href=""><i class="bi bi-instagram"></i></a>
        <a href=""><i class="bi bi-linkedin"></i></a>
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you've purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: [buy-url] -->
        Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
      </div>
    </div>
    
    
    
    
  </footer> 